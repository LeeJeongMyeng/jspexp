<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="/a00_com/a01_common.css" rel="stylesheet">
<style type="text/css">
/*

*/

</style>
<script>

</script>
</head>
<body>
	<h2>가격표생성(z13_sjon에서 물건가격갯수 얻어옴)</h2>
	
	<table id="tb01">
		<thead>
			<tr><th>물건명</th><th>가격</th><th>갯수</th></tr>
		</thead>
		<tbody></tbody>
	</table>
	
	<div id="container"></div>


</body>
<script type="text/javascript">
var h2 = document.querySelector("h2")
var div = document.body.querySelector("#container")
var tdody = document.querySelector("#tb01 tbody")
h2.onclick=callProd

function callProd(){
	var xhr=new XMLHttpRequest()
	xhr.open("get","z14_deptJson.jsp",true)
	xhr.send()
	xhr.onreadystatechange=function(){
		if(xhr.readyState==4&&xhr.status==200){
			console.log(xhr.responseText)
			div.innerHTML="문자열 json:"+xhr.responseText+"<br>"
			var plist = JSON.parse(xhr.responseText)
			var adHTML=""
			//객체로 변환
			plist.forEach(function(prod){
				adHTML+="<tr>"
				adHTML+="<td>"+prod.pname+"<br>"
				adHTML+="<td>"+prod.price+"<br>"
				adHTML+="<td>"+prod.cnt+"<br>"
				adHTML+="</tr>"
					
			})
			tdody.innerHTML=adHTML
		}
	}
}

div.innerHTML=""
// 
</script>
</html>